<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Massa Magra | HAlexandre</title>
    <meta name="description" content="Calculadora de composi√ß√£o corporal precisa. Estime massa magra e gordura usando f√≥rmulas cient√≠ficas (Boer, James, Hume).">
    <meta name="author" content="HAlexandre">
    <meta name="theme-color" content="#667eea">

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí™</text></svg>">

    <style>
        :root {
            /* --- Cores Tema Claro --- */
            --bg-grad-start: #667eea;
            --bg-grad-end: #764ba2;
            --container-bg: rgba(255, 255, 255, 0.95);
            --section-bg: #f8fafc;
            --text-title: #ffffff;
            --text-subtitle: rgba(255, 255, 255, 0.9);
            --text-dark: #374151;
            --text-muted: #6b7280;
            --input-border: #e5e7eb;
            --input-bg: #ffffff;
            --accent-color: #764ba2;
            --accent-hover: #5a3780;
            --result-card-bg: #ffffff;
            --warning-bg: #fff7ed;
            --warning-border: #f97316;
            --warning-text: #9a3412;
        }

        html.dark {
            /* --- Cores Tema Escuro --- */
            --bg-grad-start: #1e293b;
            --bg-grad-end: #0f172a;
            --container-bg: rgba(30, 41, 59, 0.95);
            --section-bg: #111827;
            --text-title: #f1f5f9;
            --text-subtitle: #cbd5e1;
            --text-dark: #f3f4f6;
            --text-muted: #9ca3af;
            --input-border: #374151;
            --input-bg: #1f2937;
            --accent-color: #60a5fa;
            --accent-hover: #3b82f6;
            --result-card-bg: #1f2937;
            --warning-bg: #451a03;
            --warning-border: #f97316;
            --warning-text: #ffedd5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--bg-grad-start), var(--bg-grad-end));
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
            transition: background 0.5s ease;
        }

        .container { max-width: 800px; margin: 0 auto; }

        /* Header */
        .header { text-align: center; margin-bottom: 2rem; display: flex; flex-direction: column; align-items: center; }
        
        .header-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        .header-logo:hover { transform: scale(1.05); }

        .title { font-size: 2.2rem; font-weight: 800; color: var(--text-title); margin-bottom: 0.5rem; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .subtitle { font-size: 1.1rem; color: var(--text-subtitle); font-weight: 400; }

        /* Card Principal */
        .calculator-container {
            background: var(--container-bg);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            position: relative;
            transition: background 0.3s ease;
        }

        /* Toggle Tema */
        .theme-toggle {
            position: absolute; top: 20px; right: 20px;
            width: 44px; height: 44px;
            border-radius: 50%; border: none;
            background: var(--section-bg);
            color: var(--text-dark);
            cursor: pointer;
            font-size: 1.2rem;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s, background 0.3s;
            z-index: 10;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .theme-toggle:hover { transform: scale(1.1); }

        /* Formul√°rio */
        .form-section { padding: 2.5rem; border-bottom: 1px solid var(--input-border); }
        .section-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1.5rem; }
        .section-title { font-size: 1.25rem; font-weight: 700; color: var(--text-dark); }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-group { display: flex; flex-direction: column; gap: 0.5rem; }
        .form-label { font-size: 0.9rem; font-weight: 600; color: var(--text-dark); }
        
        .form-input {
            padding: 0.8rem 1rem;
            border: 2px solid var(--input-border);
            border-radius: 12px;
            background: var(--input-bg);
            color: var(--text-dark);
            font-size: 1rem;
            transition: all 0.2s;
        }
        .form-input:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.15); }

        /* Radio Buttons (Sexo) */
        .radio-group { display: flex; gap: 1rem; background: var(--section-bg); padding: 0.5rem; border-radius: 12px; }
        .radio-label {
            flex: 1; text-align: center; cursor: pointer; padding: 0.6rem;
            border-radius: 8px; font-weight: 500; font-size: 0.9rem;
            transition: all 0.2s; color: var(--text-muted);
            border: 2px solid transparent;
        }
        .radio-input { display: none; }
        .radio-input:checked + .radio-label {
            background: var(--input-bg);
            color: var(--accent-color);
            border-color: var(--input-border);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* Seletor de M√©todo */
        .method-selector { margin-bottom: 2rem; }
        .method-buttons { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .method-btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--input-border);
            background: var(--input-bg);
            color: var(--text-muted);
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
        }
        .method-btn:hover { border-color: var(--accent-color); color: var(--accent-color); }
        .method-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            box-shadow: 0 4px 10px rgba(96, 165, 250, 0.3);
        }

        /* Bot√£o Calcular */
        .calculate-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .calculate-btn:hover { background: var(--accent-hover); transform: translateY(-2px); }
        .calculate-btn:active { transform: translateY(0); }

        /* Resultados */
        .results-section { background: var(--section-bg); padding: 2.5rem; display: none; animation: slideDown 0.4s ease-out; }
        .results-section.show { display: block; }
        
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; }
        
        .result-card {
            background: var(--result-card-bg);
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid var(--input-border);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .result-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: var(--accent-color);
        }

        .result-title { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 0.5rem; }
        .result-value { font-size: 2rem; font-weight: 800; color: var(--text-dark); }
        .result-unit { font-size: 0.9rem; color: var(--text-muted); font-weight: 500; }

        /* Informa√ß√µes e Footer */
        .info-section { margin-top: 2rem; }
        .info-card {
            background: var(--container-bg);
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .info-card h3 { color: var(--text-dark); margin-bottom: 0.5rem; font-size: 1.1rem; }
        .info-card p, .info-card li { color: var(--text-muted); font-size: 0.95rem; line-height: 1.6; }
        .info-card ul { padding-left: 1.2rem; }

        .warning-box {
            background: var(--warning-bg);
            border-left: 4px solid var(--warning-border);
            padding: 1rem;
            border-radius: 8px;
            color: var(--warning-text);
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .hidden { display: none; }
        
        footer { text-align: center; margin-top: 3rem; color: rgba(255,255,255,0.7); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <img src="https://raw.githubusercontent.com/Halexandre1/PDF_PRO/main/HERBERT.jpg" alt="Logo HAlexandre" class="header-logo">
            <h1 class="title">üí™ Calculadora de Massa Magra</h1>
            <p class="subtitle">An√°lise de composi√ß√£o corporal baseada em ci√™ncia</p>
        </div>

        <div class="calculator-container">
            <button class="theme-toggle" id="themeToggle" title="Alternar Tema">üåô</button>
            
            <div class="form-section">
                <div class="section-header">
                    <span class="section-title">üìù Seus Dados</span>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="weight">Peso (kg)</label>
                        <input type="number" class="form-input" id="weight" placeholder="Ex: 75.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="height">Altura (cm)</label>
                        <input type="number" class="form-input" id="height" placeholder="Ex: 180" step="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="age">Idade</label>
                        <input type="number" class="form-input" id="age" placeholder="Ex: 28">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Sexo</label>
                        <div class="radio-group">
                            <input type="radio" name="gender" id="gender-male" value="male" class="radio-input" checked>
                            <label for="gender-male" class="radio-label">Masculino</label>
                            
                            <input type="radio" name="gender" id="gender-female" value="female" class="radio-input">
                            <label for="gender-female" class="radio-label">Feminino</label>
                        </div>
                    </div>
                </div>

                <div class="method-selector">
                    <label class="form-label" style="display:block; margin-bottom:0.5rem">F√≥rmula de C√°lculo</label>
                    <div class="method-buttons" id="methodButtons">
                        <button class="method-btn active" data-method="boer">Boer (Padr√£o)</button>
                        <button class="method-btn" data-method="james">James</button>
                        <button class="method-btn" data-method="hume">Hume</button>
                        <button class="method-btn" data-method="bodyfat">% Gordura</button>
                    </div>
                </div>

                <div id="bodyfatInput" class="form-group hidden" style="margin-bottom: 2rem;">
                    <label class="form-label" for="bodyFat">% de Gordura Corporal</label>
                    <input type="number" class="form-input" id="bodyFat" placeholder="Ex: 15.5" step="0.1">
                </div>

                <button class="calculate-btn" id="calculateBtn">Calcular Resultados</button>
            </div>

            <div class="results-section" id="resultsSection">
                <div class="section-header">
                    <span class="section-title">üìä Resultado</span>
                </div>
                <div class="results-grid" id="resultsGrid">
                    <!-- Cards gerados via JS -->
                </div>
            </div>
        </div>

        <div class="info-section">
            <div class="info-card">
                <h3>‚ÑπÔ∏è Sobre as F√≥rmulas</h3>
                <ul>
                    <li><strong>Boer (1984):</strong> Considerada a mais precisa para pessoas com IMC normal.</li>
                    <li><strong>James (1976):</strong> Focada em peso e altura, usada historicamente.</li>
                    <li><strong>Hume (1966):</strong> F√≥rmula cl√°ssica, muito utilizada em ambiente cl√≠nico.</li>
                </ul>
                <div class="warning-box">
                    <strong>Aviso:</strong> Esta ferramenta fornece estimativas. Para um diagn√≥stico preciso, consulte um nutricionista ou fa√ßa uma bioimped√¢ncia/dexa.
                </div>
            </div>
        </div>

        <footer id="signature"></footer>
    </div>

<script>
    // --- M√ìDULOS ---
    
    // M√≥dulo de UI (Manipula√ß√£o do DOM)
    const UI = {
        els: {
            weight: document.getElementById('weight'),
            height: document.getElementById('height'),
            age: document.getElementById('age'),
            bodyFat: document.getElementById('bodyFat'),
            bodyFatContainer: document.getElementById('bodyfatInput'),
            resultsSection: document.getElementById('resultsSection'),
            resultsGrid: document.getElementById('resultsGrid'),
            themeToggle: document.getElementById('themeToggle'),
            methodButtons: document.querySelectorAll('.method-btn'),
            calcBtn: document.getElementById('calculateBtn'),
            signature: document.getElementById('signature')
        },

        init() {
            this.loadTheme();
            this.updateSignature();
            this.setupListeners();
        },

        setupListeners() {
            // Alternar M√©todo
            this.els.methodButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    this.els.methodButtons.forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    const method = e.target.dataset.method;
                    if (method === 'bodyfat') {
                        this.els.bodyFatContainer.classList.remove('hidden');
                    } else {
                        this.els.bodyFatContainer.classList.add('hidden');
                    }
                });
            });

            // Bot√£o Calcular
            this.els.calcBtn.addEventListener('click', () => Logic.processCalculation());

            // Alternar Tema
            this.els.themeToggle.addEventListener('click', () => this.toggleTheme());
        },

        toggleTheme() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            const isDark = html.classList.contains('dark');
            localStorage.setItem('leanMassTheme', isDark ? 'dark' : 'light');
            this.els.themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        },

        loadTheme() {
            const saved = localStorage.getItem('leanMassTheme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (!saved && prefersDark)) {
                document.documentElement.classList.add('dark');
                this.els.themeToggle.textContent = '‚òÄÔ∏è';
            } else {
                this.els.themeToggle.textContent = 'üåô';
            }
        },

        updateSignature() {
            const year = new Date().getFullYear();
            this.els.signature.innerHTML = `Feito com <span style="color:#ef4444">‚ù§</span> por HAlexandre ¬© ${year}`;
        },

        displayResults(data) {
            this.els.resultsGrid.innerHTML = `
                <div class="result-card">
                    <div class="result-title">Massa Magra</div>
                    <div class="result-value">${data.leanMass.toFixed(1)}</div>
                    <div class="result-unit">kg</div>
                </div>
                <div class="result-card">
                    <div class="result-title">Massa Gorda</div>
                    <div class="result-value">${data.fatMass.toFixed(1)}</div>
                    <div class="result-unit">kg</div>
                </div>
                <div class="result-card">
                    <div class="result-title">% de Gordura</div>
                    <div class="result-value">${data.bodyFatPct.toFixed(1)}</div>
                    <div class="result-unit">%</div>
                </div>
                <div class="result-card">
                    <div class="result-title">IMC Estimado</div>
                    <div class="result-value">${data.bmi.toFixed(1)}</div>
                    <div class="result-unit">kg/m¬≤</div>
                </div>
            `;
            this.els.resultsSection.classList.add('show');
            this.els.resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    };

    // M√≥dulo de L√≥gica (C√°lculos)
    const Logic = {
        processCalculation() {
            const w = parseFloat(UI.els.weight.value);
            const h = parseFloat(UI.els.height.value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const method = document.querySelector('.method-btn.active').dataset.method;

            if (!w || !h) return alert("Por favor, preencha peso e altura.");

            let leanMass = 0;

            if (method === 'boer') {
                if (gender === 'male') leanMass = (0.407 * w) + (0.267 * h) - 19.2;
                else leanMass = (0.252 * w) + (0.473 * h) - 48.3;
            } 
            else if (method === 'james') {
                if (gender === 'male') leanMass = 1.1 * w - 128 * Math.pow(w/h, 2);
                else leanMass = 1.07 * w - 148 * Math.pow(w/h, 2);
            } 
            else if (method === 'hume') {
                if (gender === 'male') leanMass = (0.32810 * w) + (0.33929 * h) - 29.5336;
                else leanMass = (0.29569 * w) + (0.41813 * h) - 43.2933;
            }
            else if (method === 'bodyfat') {
                const bf = parseFloat(UI.els.bodyFat.value);
                if (!bf && bf !== 0) return alert("Preencha o % de gordura.");
                leanMass = w * (1 - (bf/100));
            }

            // Prote√ß√£o contra resultados negativos ou irreais
            if (leanMass < 0 || leanMass > w) leanMass = 0;

            const fatMass = w - leanMass;
            const bodyFatPct = (fatMass / w) * 100;
            const bmi = w / Math.pow(h/100, 2);

            UI.displayResults({ leanMass, fatMass, bodyFatPct, bmi });
        }
    };

    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', () => UI.init());

</script>
</body>
</html>
